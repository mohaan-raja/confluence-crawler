<h1>Title: DevOps: Adding index on updated_at columns in baikal slave RDS</h1><ol><li>Connect to master and increase the bin log retention time to 72 hours.<ol><li>call mysql.rds_set_configuration('binlog retention hours', 72);</li><li>Verify the increase: call mysql.rds_show_configuration;</li></ol></li><li>Connect to baikal instance and stop the replication.<ol><li>call mysql.rds_stop_replication;</li></ol></li><li>Get the top 50 largest tables from any of the shards with customer data<ol><li>SELECT table_name, table_rows, data_length, index_length,round(((data_length + index_length) / 1024 / 1024),2) as size_as FROM information_schema.TABLES where table_schema = &quot;freshsales&quot; order by size_as desc limit 50;</li></ol></li><li>Add index on those 50 tables on the baikal shard<ol><li>Example: alter table leads add index leads_updated_at(updated_at);</li></ol></li><li>Once all alter queries are done, start replication<ol><li>call mysql.rds_start_replication;</li></ol></li><li>Wait for the slave to catch up to the master. Check for &quot;Seconds Behind Master&quot; from the following command<ol><li>show slave status \G</li></ol></li><li>Once the slave is in sync, reset the bin log retention in master<ol><li>call mysql.rds_set_configuration('binlog retention hours', NULL);</li><li>Verify the change: call mysql.rds_show_configuration;</li></ol></li></ol><p><br/></p><p>alter table email_conversation_contents add index email_conversation_contents_updated_at(updated_at);<br/>alter table timeline_feeds add index timeline_feeds_updated_at(updated_at);<br/>alter table email_conversation_recipients add index email_conversation_recipients_updated_at(updated_at);<br/>alter table leads add index leads_updated_at(updated_at);<br/>alter table email_conversations add index email_conversations_updated_at(updated_at);<br/>alter table event_logs add index event_logs_updated_at(updated_at);<br/>alter table contacts add index contacts_updated_at(updated_at);<br/>alter table lead_custom_fields add index lead_custom_fields_updated_at(updated_at);<br/>alter table email_conversation_links add index email_conversation_links_updated_at(updated_at);<br/>alter table fullcontact_details add index fullcontact_details_updated_at(updated_at);<br/>alter table page_views add index page_views_updated_at(updated_at);<br/>alter table event_summaries add index event_summaries_updated_at(updated_at);<br/>alter table attachments add index attachments_updated_at(updated_at);<br/>alter table sync_details add index sync_details_updated_at(updated_at);<br/>alter table contact_custom_fields add index contact_custom_fields_updated_at(updated_at);<br/>alter table lead_emails add index lead_emails_updated_at(updated_at);<br/>alter table visitor_profiles add index visitor_profiles_updated_at(updated_at);<br/>alter table custom_reports add index custom_reports_updated_at(updated_at);<br/>alter table conversations add index conversations_updated_at(updated_at);<br/>alter table lead_companies add index lead_companies_updated_at(updated_at);<br/>alter table stage_histories add index stage_histories_updated_at(updated_at);<br/>alter table lead_forms add index lead_forms_updated_at(updated_at);<br/>alter table sales_accounts add index sales_accounts_updated_at(updated_at);<br/>alter table tasks add index tasks_updated_at(updated_at);<br/>alter table contact_emails add index contact_emails_updated_at(updated_at);<br/>alter table emails add index emails_updated_at(updated_at);<br/>alter table sessions add index sessions_updated_at(updated_at);<br/>alter table sync_stats add index sync_stats_updated_at(updated_at);<br/>alter table notes add index notes_updated_at(updated_at);<br/>alter table contact_forms add index contact_forms_updated_at(updated_at);<br/>alter table deal_forms add index deal_forms_updated_at(updated_at);<br/>alter table sales_account_custom_fields add index sales_account_custom_fields_updated_at(updated_at);<br/>alter table sales_sequence_list_trails add index sales_sequence_list_trails_updated_at(updated_at);<br/>alter table appointments add index appointments_updated_at(updated_at);<br/>alter table deal_custom_fields add index deal_custom_fields_updated_at(updated_at);<br/>alter table deals add index deals_updated_at(updated_at);<br/>alter table sales_sequence_lists add index sales_sequence_lists_updated_at(updated_at);<br/>alter table will_filter_filters add index will_filter_filters_updated_at(updated_at);<br/>alter table phone_calls add index phone_calls_updated_at(updated_at);<br/>alter table email_conversation_opens add index email_conversation_opens_updated_at(updated_at);<br/>alter table shared_items add index shared_items_updated_at(updated_at);<br/>alter table sales_activity_forms add index sales_activity_forms_updated_at(updated_at);<br/>alter table workflow_automation_trails add index workflow_automation_trails_updated_at(updated_at);<br/>alter table email_bulk_recipients add index email_bulk_recipients_updated_at(updated_at);<br/>alter table contact_deal_associations add index contact_deal_associations_updated_at(updated_at);<br/>alter table industry_types add index industry_types_updated_at(updated_at);<br/><br/></p>