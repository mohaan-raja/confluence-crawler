<h1>Title: Freshsales help docs for on call engineers:</h1><h1 id="Freshsaleshelpdocsforoncallengineers:-Elasticsearch:"><span style="color: rgb(51,102,255);">Elasticsearch:<br/></span></h1><p>IndexMissingException<br/>create_index - </p><blockquote><pre><span style="color: rgb(0,0,128);">def </span><span style="color: rgb(0,0,255);">alias_check</span>(<span style="color: rgb(195,117,34);">acc</span>)<br/>  <span style="color: rgb(0,60,90);">client </span>= <span style="color: rgb(102,14,122);">Search</span>::<span style="color: rgb(102,14,122);">EsSearch</span>.new(<span style="color: rgb(195,117,34);">acc</span>)<br/>  <span style="color: rgb(102,14,122);">Search</span>::<span style="color: rgb(102,14,122);">EsSearch</span>::<span style="color: rgb(102,14,122);">ES_INDICES</span>.each <span style="color: rgb(0,0,128);">do </span>|<span style="color: rgb(195,117,34);">model</span>|<br/>    p <span style="color: rgb(195,117,34);">model<br/></span><span style="color: rgb(195,117,34);">    </span><span style="color: rgb(0,0,128);">unless </span><span style="color: rgb(0,60,90);">client</span>.alias_exist?(<span style="color: rgb(195,117,34);">model</span>)<br/>      loop <span style="color: rgb(0,0,128);">do<br/></span><span style="color: rgb(0,0,128);">        begin<br/></span><span style="color: rgb(0,0,128);">          </span><span style="color: rgb(0,60,90);">client</span>.create_alias(<span style="color: rgb(195,117,34);">model</span>)<br/>          p <span style="color: rgb(0,128,0);">'created alias - ' </span>+ <span style="color: rgb(195,117,34);">model<br/></span><span style="color: rgb(195,117,34);">          </span><span style="color: rgb(0,0,128);">break<br/></span><span style="color: rgb(0,0,128);">        rescue </span><span style="color: rgb(102,14,122);">StandardError </span><span style="color: rgb(0,0,255);">=&gt; </span><span style="color: rgb(195,117,34);">e<br/></span><span style="color: rgb(195,117,34);">          </span>sleep <span style="color: rgb(0,0,255);">0.5<br/></span><span style="color: rgb(0,0,255);">          </span>p <span style="color: rgb(0,128,0);">'retry'<br/></span><span style="color: rgb(0,128,0);">        </span><span style="color: rgb(0,0,128);">end<br/></span><span style="color: rgb(0,0,128);">      end<br/></span><span style="color: rgb(0,0,128);">    end<br/></span><span style="color: rgb(0,0,128);">  end<br/></span><span style="color: rgb(0,0,128);">end</span></pre></blockquote><p><br/>Reindex - </p><blockquote><p><span style="color: rgb(128,128,128);">rake elasticsearch:reindex_account[account_id]</span></p></blockquote><h1 id="Freshsaleshelpdocsforoncallengineers:-SearchService:"><span style="color: rgb(51,102,255);"><br/></span><span style="color: rgb(51,102,255);">Search Service: </span></h1><p><span style="color: rgb(32,33,36);">Search::Strategies::SearchService::Errors::AccountNotFoundException: unknown error occurred in search</span></p><p><span style="color: rgb(32,33,36);letter-spacing: 0.0px;">Reindex Search Service:   </span></p><blockquote><p><span class="s1">Search::Strategies::SearchService::Reindex.reindex_accounts(index_account_id: account_id) if Search::Strategies::SearchService::Response.reindex_required?(account_id)<br/></span></p></blockquote><p><br/></p><h1 id="Freshsaleshelpdocsforoncallengineers:-Freshcaller"><span class="s1" style="color: rgb(51,102,255);">Freshcaller</span></h1><p><span class="s1" style="color: rgb(51,102,255);">   1. <strong><span style="color: rgb(0,0,0);">Remove freshcaller integration  script</span></strong></span></p><p><span class="s1" style="color: rgb(51,102,255);"><span style="color: rgb(0,0,0);">       </span></span></p><p class="p1">  def unlink_freshcaller(account_id)</p><p class="p1">      fc_account = FreshcallerAccount.find_by_account_id(account_id)</p><p class="p1">      Sharding.select_shard_of(account_id) do</p><p class="p1">        account = FdMultitenant::Account.find(account_id).make_current</p><p class="p1">        fc_users = FreshcallerUser.where(account_id: account_id)</p><p class="p1">        fc_users.each do |fc_user|</p><p class="p1">        fc_user.destroy</p><p class="p1">      end</p><p class="p1">    end</p><p class="p1">    fc_account.destroy</p><p class="p1">  end</p><p class="p1">2. <strong>Change Freshcaller domain: </strong></p><p><span class="s1"> </span></p><p class="p1">def change_freshcaller_domain(account_id, new_domain)</p><p class="p1">  fc_account = FreshcallerAccount.find_by_account_id(account_id)</p><p class="p1">  Sharding.select_shard_of(account_id) do</p><p class="p1">    account = FdMultitenant::Account.find(account_id).make_current</p><p class="p1">    fc_account.domain = new_domain</p><p class="p1">    fc_account.save</p><p class="p1">  end</p><p class="p1">end</p><p class="p1"><br/></p><p class="p1"><br/></p><p class="p1"><br/></p><p><span class="s1">    </span></p><p><br/></p><p><br/><br/><br/></p><p><br/></p>