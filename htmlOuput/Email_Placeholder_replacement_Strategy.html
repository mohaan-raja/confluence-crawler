<h1>Title: Email Placeholder replacement Strategy</h1><p>  As of now, when email bulk email is initiated,  we happen to store all the <strong>email_conversation_contents</strong> for all recipients sent through this flow. But it happens that the contents sent for all the recipients through this flow are almost same except the dynamic stuffs like <strong>Placeholders , Email signatures. </strong> So we decided to store the content in this email_bulks table and dynamic content in <strong>email_conversations</strong>  as JSON in text column <strong><span class="inline-comment-marker" data-ref="05379d1d-06d3-442f-9cea-41defecc7b25">metadata</span>.</strong> </p><p>  </p><div class="table-wrap"><table class="relative-table confluenceTable" style="width: 38.6576%;"><colgroup><col style="width: 45.6548%;"/><col style="width: 54.0649%;"/></colgroup><tbody><tr><th class="confluenceTh">table_name</th><th class="confluenceTh">column_name</th></tr><tr><td class="confluenceTd">email_conversations</td><td class="confluenceTd">metadata(text)</td></tr><tr><td class="confluenceTd"><br/></td><td class="confluenceTd"><br/></td></tr></tbody></table></div><p><br/></p><p><strong>Sample Placeholder hash</strong>:</p><p>  <span class="sBrace structure-1" style="color: rgb(102,102,102);">{<span> </span></span><br/><span style="color: rgb(85,85,85);">   </span><span class="sObjectK" style="color: rgb(51,51,51);">&quot;placeholders_values_map&quot;</span><span class="sColon" style="color: rgb(102,102,102);">:</span><span class="sBrace structure-2" style="color: rgb(102,102,102);">{<span> </span></span><br/><span style="color: rgb(85,85,85);">   </span><span style="color: rgb(85,85,85);">   </span><span class="sObjectK" style="color: rgb(51,51,51);">&quot;lead&quot;</span><span class="sColon" style="color: rgb(102,102,102);">:</span><span class="sBrace structure-3" style="color: rgb(102,102,102);">{<span> </span></span><br/><span style="color: rgb(85,85,85);">   </span><span style="color: rgb(85,85,85);">   </span><span style="color: rgb(85,85,85);">   </span><span class="sObjectK" style="color: rgb(51,51,51);">&quot;full_name&quot;</span><span class="sColon" style="color: rgb(102,102,102);">:</span><span class="sObjectV" style="color: rgb(85,85,85);">&quot;rest&quot;</span><br/><span style="color: rgb(85,85,85);">   </span><span style="color: rgb(85,85,85);">   </span><span class="sBrace structure-3" style="color: rgb(102,102,102);">}</span><br/><span style="color: rgb(85,85,85);">   </span><span class="sBrace structure-2" style="color: rgb(102,102,102);">}</span><br/><span class="sBrace structure-1" style="color: rgb(102,102,102);">}</span></p><p><strong><span class="sBrace structure-1" style="color: rgb(102,102,102);">Phase 1(Ready for test): </span></strong></p><p><strong><span class="sBrace structure-1" style="color: rgb(102,102,102);">  </span></strong><span class="sBrace structure-1" style="color: rgb(102,102,102);">1.  <strong>Bulk email</strong>:  Since for all bulk emails we will have placeholder hash in each email conversations  and store in metadata columns. <strong>Liquid </strong>gem is used to replace placeholders from <strong>email_bulks(content)</strong> in email conversation content list and detail view</span></p><p><strong><span class="sBrace structure-1" style="color: rgb(102,102,102);"><span class="inline-comment-marker" data-ref="363deb43-5510-4d98-aa0c-1b281a7f5766">Phase</span> 2(Yet to start dev):</span></strong></p><p><span class="sBrace structure-1" style="color: rgb(102,102,102);">  1. Sales sequence </span></p><p><span class="sBrace structure-1" style="color: rgb(102,102,102);">   2. Workflow automation</span></p><p><br/></p><p><br/></p><p><br/></p><p><br/></p>