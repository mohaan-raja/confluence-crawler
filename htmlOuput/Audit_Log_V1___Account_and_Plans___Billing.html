<h1>Title: Audit Log V1 - Account and Plans & Billing</h1><h2 id="AuditLogV1AccountandPlans&amp;Billing-Subscription"><strong>Subscription</strong></h2><p style="margin-left: 30.0px;">Track the payload_type: subscription_update</p><p style="margin-left: 30.0px;">The message[&quot;payload&quot;][&quot;<span style="color: rgb(0,51,102);">changes</span>&quot;][&quot;model_changes&quot;] should have one of the following keys</p><ul><li style="margin-left: 30.0px;">state</li><li style="margin-left: 30.0px;">subscription_plan_name</li><li style="margin-left: 30.0px;">renewal_period</li><li style="margin-left: 30.0px;">subscription_currency_name</li><li style="margin-left: 30.0px;">agent_limit</li><li style="margin-left: 30.0px;">phone_credits</li></ul><p style="margin-left: 30.0px;"><strong>Sample Payload</strong></p><div class="code panel pdl" style="border-width: 1px;">
 <div class="codeHeader panelHeader pdl hide-border-bottom" style="border-bottom-width: 1px;">
  <b class="code-title">susbcription_update payload</b><span class="collapse-source expand-control" style="display:none;"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">Expand source</span></span><span class="collapse-spinner-wrapper"></span>
 </div>
 <div class="codeContent panelContent pdl hide-toolbar">
  <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: js; gutter: true; theme: Confluence; collapse: true" data-theme="Confluence">{
  "account_id":"1",
  "pod":"useast1-pod1",
  "region":"us-east-1",
  "payload_type":"subscription_update",
  "payload_version":"1.1",
  "payload":{
    "model":"Subscription",
    "actor":{
      "id":1,
      "name":"Sales Agent",
      "type":"user"
    },
    "action":"update",
    "action_epoch":1536732802.522538,
    "uuid":"f3986502b65211e89e42186590cc6def",
    "account_full_domain":"localhost.freshsales-dev.com",
    "event_info":{
      "ip_address":"127.0.0.1"
    },
    "model_properties":{
      "id":1,
      "amount":"3792.0",
      "state":"active",
      "free_agents":null,
      "renewal_period":12,
      "subscription_plan_id":12,
      "next_renewal_at":"2019-09-12T06:12:00Z",
      "card_number":"****",
      "subscription_currency_id":1,
      "agent_limit":4,
      "active_users":1,
      "scheduled_downgrade":null
    },
    "changes":{
      "model_changes":{
        "subscription_plan_id":[
          11,
          12
        ],
        "amount":[
          "2352.0",
          "3792.0"
        ],
        "updated_at":[
          "2018-09-12T11:42:05+05:30",
          "2018-09-12T11:43:22+05:30"
        ],
        "subscription_plan_name":[
          "Estate",
          "Forest"
        ]
      },
      "system_changes":{

      },
      "misc_changes":{

      }
    }
  }
}</pre>
 </div>
</div><p style="margin-left: 30.0px;"><br/></p><h2 id="AuditLogV1AccountandPlans&amp;Billing-Account"><strong>Account</strong></h2><p style="margin-left: 30.0px;">Track the payload_type: account_create, account_update, account_destroy</p><p style="margin-left: 30.0px;">For account_create and account_destroy there is no restriction on payload data.</p><p style="margin-left: 30.0px;">For account_update the message[&quot;payload&quot;][&quot;<span style="color: rgb(0,51,102);">changes</span>&quot;][&quot;model_changes&quot;] should have one of the following keys </p><ul><li>name</li><li>admin_first_name</li><li>admin_last_name</li><li>admin_email</li><li>admin_phone</li><li>time_zone</li><li>currency</li><li>date_format</li><li>time_format</li><li>locale</li><li>api_limit</li><li>do_not_disturb</li><li>implicit_scoring_enabled</li><li>full_contact_enabled</li><li>request_cancellation</li></ul><p style="margin-left: 30.0px;"><strong>Sample Payload</strong></p><p><strong><br/></strong></p><div class="code panel pdl" style="border-width: 1px;">
 <div class="codeHeader panelHeader pdl hide-border-bottom" style="border-bottom-width: 1px;">
  <b class="code-title">account_create payload</b><span class="collapse-source expand-control" style="display:none;"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">Expand source</span></span><span class="collapse-spinner-wrapper"></span>
 </div>
 <div class="codeContent panelContent pdl hide-toolbar">
  <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: js; gutter: true; theme: Confluence; collapse: true" data-theme="Confluence">{
  "account_id":"11",
  "pod":"useast1-pod1",
  "region":"us-east-1",
  "payload_type":"account_create",
  "payload_version":"1.1",
  "payload":{
    "model":"FdMultitenant::Account",
    "actor":{
      "id":10,
      "name":"Sales Agent",
      "type":"user"
    },
    "action":"create",
    "action_epoch":1537189934.850139,
    "uuid":"4baf3d7aba7b11e89b09186590cc6def",
    "account_full_domain":"test9.freshsales-dev.com",
    "event_info":{
      "ip_address":null
    },
    "model_properties":{
      "id":11,
      "name":"Test Account",
      "full_domain":"test9.freshsales-dev.com",
      "admin_email":"tholkappiyan.velavan@freshworks.com",
      "admin_first_name":"Sales",
      "admin_last_name":"Agent",
      "admin_phone":"+919999999999",
      "subscription_plan_name":"Estate"
    }
  }
}</pre>
 </div>
</div><div class="code panel pdl" style="border-width: 1px;">
 <div class="codeHeader panelHeader pdl hide-border-bottom" style="border-bottom-width: 1px;">
  <b class="code-title">account_update payload</b><span class="collapse-source expand-control" style="display:none;"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">Expand source</span></span><span class="collapse-spinner-wrapper"></span>
 </div>
 <div class="codeContent panelContent pdl hide-toolbar">
  <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: js; gutter: true; theme: Confluence; collapse: true" data-theme="Confluence">{
  "account_id":"1",
  "pod":"useast1-pod1",
  "region":"us-east-1",
  "payload_type":"account_update",
  "payload_version":"1.1",
  "payload":{
    "model":"FdMultitenant::Account",
    "actor":{
      "id":1,
      "name":"Sales Agent",
      "type":"user"
    },
    "action":"update",
    "action_epoch":1536757440.868284,
    "uuid":"5131981cb68c11e8acc1186590cc6def",
    "account_full_domain":"localhost.freshsales-dev.com",
    "event_info":{
      "ip_address":"127.0.0.1"
    },
    "model_properties":{
      "id":1,
      "name":"Local Dev Account",
      "full_domain":"localhost.freshsales-dev.com",
      "time_zone":"Chennai",
      "features_list":[
        "phone",
        "email",
        "lead_score",
        "deal_funnel_view",
        "territories",
        "lead_assignment_rules",
        "imap",
        "priority_inbox",
        "email_bulk",
        "custom_email_templates",
        "email_tracking",
        "email_scheduling",
        "real_time_notifications",
        "profile_enrichment",
        "website_event_tracking",
        "integration_google_calendar",
        "integration_segment",
        "custom_reports",
        "manual_call_log",
        "deal_landing_page",
        "user_columns",
        "document",
        "restricted_user",
        "fs_email",
        "integration_mailchimp",
        "paid_goodies",
        "multi_pipeline",
        "workflow_automation",
        "dashboards",
        "integration_hubspot",
        "parent_child_account_relationship",
        "integration_freshchat",
        "sales_sequence",
        "call_transfer",
        "sales_activities",
        "workflow_automation_periodic",
        "integration_office365_calendar",
        "call_masking",
        "ip_whitelisting",
        "basic_reports",
        "integration_quickbooks_invoice",
        "web_forms",
        "marketplace",
        "freshconnect",
        "google_contacts",
        "custom_error_codes"
      ],
      "currency":"USD",
      "date_format":"ddd DD MMM, YYYY",
      "time_format":"HH:mm",
      "locale":"en",
      "document_size":0,
      "api_limit":1000,
      "bounce_rate":"0.0",
      "web_form_limit":50,
      "do_not_disturb":true,
      "implicit_scoring_enabled":true,
      "full_contact_enabled":true,
      "admin_email":"tholkappiyan.velavan@freshworks.com",
      "admin_first_name":"Local Sales",
      "admin_last_name":"Agent 1",
      "admin_phone":"+919199999999",
      "invoice_emails":[
        "tholkappiyan.velavan@freshworks.com"
      ]
    },
    "changes":{
      "model_changes":{
        "name":[
          "Local Account",
          "Local Dev Account"
        ],
        "updated_at":[
          "2018-09-12T17:48:08+05:30",
          "2018-09-12T18:33:59+05:30"
        ],
        "admin_last_name":[
          "Agent",
          "Agent 1"
        ]
      },
      "system_changes":{

      },
      "misc_changes":{

      }
    }
  }
}</pre>
 </div>
</div><div class="code panel pdl" style="border-width: 1px;">
 <div class="codeHeader panelHeader pdl hide-border-bottom" style="border-bottom-width: 1px;">
  <b class="code-title">account_destroy payload</b><span class="collapse-source expand-control" style="display:none;"><span class="expand-control-icon icon">&nbsp;</span><span class="expand-control-text">Expand source</span></span><span class="collapse-spinner-wrapper"></span>
 </div>
 <div class="codeContent panelContent pdl hide-toolbar">
  <pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Confluence; collapse: true" data-theme="Confluence">{
  "account_id":"3",
  "pod":"useast1-pod1",
  "region":"us-east-1",
  "payload_type":"account_destroy",
  "payload_version":"1.1",
  "payload":{
    "model":"FdMultitenant::Account",
    "actor":{
      "id":0,
      "name":"system",
      "type":"system"
    },
    "action":"destroy",
    "action_epoch":1537266531.857266,
    "uuid":"a311bc5cbb2d11e89741186590cc6def",
    "account_full_domain":"test1.freshsales-dev.com",
    "event_info":{
      "ip_address":null
    },
    "model_properties":{
      "id":3,
      "name":"Test Account",
      "full_domain":"test1.freshsales-dev.com"
    }
  }
}</pre>
 </div>
</div><p style="margin-left: 30.0px;"><br/><br/></p>