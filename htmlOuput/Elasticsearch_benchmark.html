<h1>Title: Elasticsearch benchmark</h1><p>Elasticsearch was queried for test dataset and particularly for leads which were mergable. Test set was created as per <a href="https://confluence.freshworks.com/x/zRVQD" rel="nofollow">documentation</a>. Non mergable records were left out as they were giving near perfect results. </p><ol><li>This is currently treated as a binary classification. </li><li>Primary leads were searched for account id 21 for duplicates. Label for mergeable leads is 1.</li><li>If secondary lead id was found then label classified as 1.</li><li>Confusion matrix, recall, precision are calculated. </li><li>Exact ES queries can be found here <a href="https://confluence.freshworks.com/x/wxZQD" rel="nofollow">https://confluence.freshworks.com/x/wxZQD</a></li></ol><p>Caveats</p><ul><li>Rank when searching in ES is not useful measure with current dataset because <ul><li>Results ranked above paired secordary can be true duplicates</li><li>Not feasible to compare it with other ES models</li></ul></li></ul><p><br/></p><ul><li><h4 id="Elasticsearchbenchmark-Baseresult(ES1)"><strong>Base result</strong> (ES1)</h4></li></ul><p>Name is matched exactly. </p><blockquote><pre>Confusion matrix [[5391 0] [ 626 753]]</pre><pre>Precision [0.89 1. ]</pre><h4 id="Elasticsearchbenchmark-Recall[1.0.54]">Recall [1. 0.54]</h4><pre>fscore [0.94 0.70]</pre><pre>Support [5391 1379]</pre></blockquote><p><br/></p><ul><li><h4 id="Elasticsearchbenchmark-Companynamematchlastname(ES2)">Company name match last name (ES2)</h4></li></ul><p>Exact name matching and exact last_name match with company_name</p><blockquote><pre>Confusion matrix [[5391    0][ 122 1257]]
Precision [0.97 1.        ]
Recall [1.         0.91]
fscore [0.98 0.95]
Support [5391 1379]</pre></blockquote><p>Account id - 53524</p><blockquote><pre>Confusion matrix [[7707    0] [1418 3262]]
Precision [0.84460274 1.        ]
Recall [1.         0.69700855]
fscore [0.9157557  0.82145555]
Support [7707 4680]</pre></blockquote><p>Account id - 56025</p><blockquote><pre>Confusion matrix [[8407    0][ 103 1999]]
Precision [0.98789659 1.        ]
Recall [1.         0.95099905]
fscore [0.99391145 0.97488417]
Support [8407 2102]</pre></blockquote><ul><li><h4 id="Elasticsearchbenchmark-Refined(ES3)">Refined (ES3)</h4></li></ul><p class="p1"><span class="s1">('Account id', '53524')</span></p><p class="p1"><span class="s1">('Confusion matrix', array([[7859,    0],</span>[ 271, 4241]]))</p><p class="p1"><span class="s1">('Precision', array([0.96666667, 1.        ]))</span></p><p class="p1"><span class="s1">('Recall', array([1.        , 0.93993794]))</span></p><p class="p1"><span class="s1">('fscore', array([0.98305085, 0.96903919]))</span></p><p class="p1"><span class="s1">('Support', array([7859, 4512]))</span></p><p class="p1"><span class="s1"><br/></span></p><p class="p1"><span class="s1">('Account id', '56025')</span></p><p class="p1"><span class="s1">('Confusion matrix', array([[7254,    0],</span></p><p class="p1"><span class="s1">       [ 245, 1607]]))</span></p><p class="p1"><span class="s1">('Precision', array([0.96732898, 1.        ]))</span></p><p class="p1"><span class="s1">('Recall', array([1.        , 0.86771058]))</span></p><p class="p1"><span class="s1">('fscore', array([0.98339321, 0.92917028]))</span></p><p class="p1"><span class="s1">('Support', array([7254, 1852]))</span></p><p class="p1"><span class="s1"><br/></span></p><p class="p1"><span class="s1">('Account id', '70700')</span></p><p class="p1">('Confusion matrix', array([[2824,    0],</p><p class="p1"><span class="s1">       [ 418,  306]]))</span></p><p class="p1"><span class="s1">('Precision', array([0.87106724, 1.        ]))</span></p><p class="p1"><span class="s1">('Recall', array([1.        , 0.42265193]))</span></p><p class="p1"><span class="s1">('fscore', array([0.93109133, 0.59417476]))</span></p><p class="p1"><span class="s1">('Support', array([2824,  724]))</span></p><p class="p1"><span class="s1"><br/></span></p><p class="p1"><span class="s1">('Account id', '8302')</span></p><p class="p1"><span class="s1">('Confusion matrix', array([[2526,    0],</span> [ 288,  348]]))</p><p class="p1"><span class="s1">('Precision', array([0.89765458, 1.        ]))</span></p><p class="p1"><span class="s1">('Recall', array([1.        , 0.54716981]))</span></p><p class="p1"><span class="s1">('fscore', array([0.94606742, 0.70731707]))</span></p><p class="p1"><span class="s1">('Support', array([2526,  636]))</span></p><p class="p1"><span class="s1"><br/></span></p><p class="p1"><span class="s1">('Account id', '69198')</span></p><p class="p1"><span class="s1">('Confusion matrix', array([[192,   0],</span>[  5,  39]]))</p><p class="p1"><span class="s1">('Precision', array([0.97461929, 1.        ]))</span></p><p class="p1"><span class="s1">('Recall', array([1.        , 0.88636364]))</span></p><p class="p1"><span class="s1">('fscore', array([0.98714653, 0.93975904]))</span></p><p class="p1"><span class="s1">('Support', array([192,  44]))</span></p><p><br/></p><p><br/></p><p><br/></p>